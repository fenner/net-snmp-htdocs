<!--#set var="section" value="development" -->
<!--#include virtual="/page-top.html" -->
<!-- CONTENT START -->
  <!-- Generated by Doxygen 1.3.9.1 -->

  <div class="qindex">
    <a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class=
    "qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class=
    "qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class=
    "qindex" href="examples.html">Examples</a>
  </div>

  <div class="nav">
    <a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href=
    "dir_000001.html">net-snmp</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">agent</a>
  </div>

  <h1>object_monitor.h</h1>

  <div class="fragment">
    <pre class="fragment">
00001 <span class="comment">/**************************************************************************</span>
00002 <span class="comment"> * object_monitor.h</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * Contributed by: Robert Story &lt;rstory@freesnmp.com&gt;</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> * $Id$</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> * functions and data structures for cooperating code to monitor objects.</span>
00009 <span class="comment"> *</span>
00010 <span class="comment"> * WARNING! WARNING! WARNING! WARNING! WARNING! WARNING! WARNING! WARNING!</span>
00011 <span class="comment"> * WARNING!                                                       WARNING!</span>
00012 <span class="comment"> * WARNING!                                                       WARNING!</span>
00013 <span class="comment"> * WARNING!         This code is under active development         WARNING!</span>
00014 <span class="comment"> * WARNING!         and is subject to change at any time.         WARNING!</span>
00015 <span class="comment"> * WARNING!                                                       WARNING!</span>
00016 <span class="comment"> * WARNING!                                                       WARNING!</span>
00017 <span class="comment"> * WARNING! WARNING! WARNING! WARNING! WARNING! WARNING! WARNING! WARNING!</span>
00018 <span class="comment"> */</span>
00019 <span class="preprocessor">#ifndef OBJECT_MONITOR_H</span>
00020 <span class="preprocessor">#define OBJECT_MONITOR_H</span>
00021 
00022 <span class="preprocessor">#ifdef __cplusplus</span>
00023 <span class="keyword">extern</span>          <span class="stringliteral">"C"</span> {
00024 <span class="preprocessor">#endif</span>
00025 
00026     <span class="comment">/*</span>
00027 <span class="comment">     * notification types</span>
00028 <span class="comment">     */</span>
00029     <span class="keyword">enum</span> {
00030         <span class="comment">/*</span>
00031 <span class="comment">         * cooperative notification from the object being watched</span>
00032 <span class="comment">         */</span>
00033         NOTIFICATION_COOPERATIVE = 1,
00034         <span class="comment">/*</span>
00035 <span class="comment">         * notification that an object has been set vi SNMP-SET</span>
00036 <span class="comment">         */</span>
00037         NOTIFICATION_SET_REQUEST,
00038         <span class="comment">/*</span>
00039 <span class="comment">         * end of current notification types</span>
00040 <span class="comment">         */</span>
00041         NOTIFICATION_END
00042     };
00043 
00044     <span class="comment">/*</span>
00045 <span class="comment">     * COOPERATIVE event types</span>
00046 <span class="comment">     */</span>
00047     <span class="keyword">enum</span> {
00048         EVENT_ROW_ADD = 1,
00049         EVENT_ROW_MOD,
00050         EVENT_ROW_DEL,
00051         EVENT_COL_MOD,
00052         EVENT_OBJ_MOD,
00053         EVENT_END
00054     };
00055 
00056     <span class="comment">/*</span>
00057 <span class="comment">     * data structures</span>
00058 <span class="comment">     */</span>
00059 
00060 
00061     <span class="comment">/*</span>
00062 <span class="comment">     * callback header</span>
00063 <span class="comment">     */</span>
00064     <span class="keyword">typedef</span> <span class="keyword">struct </span>netsnmp_monitor_callback_header_s {
00065 
00067         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    event;
00068 
00070         netsnmp_index   monitored_object;
00071 
00073         <span class="keywordtype">int</span>             priority;
00074 
00076         <span class="keywordtype">void</span>           *watcher_data;
00077 
00079         <span class="keywordtype">void</span>           *object_info;
00080 
00082         <span class="keyword">struct </span>netsnmp_monitor_callback_header_s *<span class="keyword">private</span>;
00083         <span class="keywordtype">int</span>             refs;
00084 
00085 
00086     } netsnmp_monitor_callback_header;
00087 
00088     <span class="comment">/*</span>
00089 <span class="comment">     *</span>
00090 <span class="comment">     */</span>
00091     <span class="keyword">typedef</span> <span class="keyword">struct </span>netsnmp_monitor_callback_set_request_s {
00092 
00094         netsnmp_monitor_callback_header hdr;
00095 
00097         <a class="code" href="structnetsnmp__mib__handler__s.html">netsnmp_mib_handler</a> *handler;
00098 
00100         <a class="code" href="structsnmp__pdu.html">netsnmp_pdu</a>    *pdu;
00101 
00103         <a class="code" href="structnetsnmp__request__info__s.html">netsnmp_request_info</a> *request;
00104 
00105     } netsnmp_monitor_set_request_data;
00106 
00107     <span class="comment">/*</span>
00108 <span class="comment">     *</span>
00109 <span class="comment">     */</span>
00110     <span class="keyword">typedef</span> <span class="keyword">struct </span>netsnmp_monitor_callback_cooperative_s {
00111 
00113         netsnmp_monitor_callback_header hdr;
00114 
00115     } netsnmp_monitor_callback_cooperative;
00116 
00117 
00118 
00119     <span class="keyword">typedef</span> <span class="keywordtype">void</span>   
00120         (netsnmp_object_monitor_callback) (netsnmp_monitor_callback_header
00121                                            *);
00122 
00123 
00124 
00125 
00126     <span class="comment">/**********************************************************************</span>
00127 <span class="comment">     * Registration function prototypes</span>
00128 <span class="comment">     */</span>
00129 
00130     <span class="comment">/*</span>
00131 <span class="comment">     * Register a callback for the specified object.</span>
00132 <span class="comment">     */</span>
00133     <span class="keywordtype">int</span>             netsnmp_monitor_register(oid * object, size_t oid_len,
00134                                              <span class="keywordtype">int</span> priority,
00135                                              <span class="keywordtype">unsigned</span> <span class=
"keywordtype">int</span> events,
00136                                              <span class="keywordtype">void</span> *watcher_data,
00137                                              netsnmp_object_monitor_callback
00138                                              * cb);
00139 
00140     <span class="comment">/*</span>
00141 <span class="comment">     * Unregister a callback for the specified object.</span>
00142 <span class="comment">     */</span>
00143     <span class="keywordtype">int</span>             netsnmp_monitor_unregister(oid * object,
00144                                                size_t oid_len,
00145                                                <span class="keywordtype">int</span> priority,
00146                                                <span class="keywordtype">void</span> *watcher_data,
00147                                                netsnmp_object_monitor_callback
00148                                                * cb);
00149 
00150     <span class="comment">/*</span>
00151 <span class="comment">     * check to see if a registration exists for an object/event combination</span>
00152 <span class="comment">     */</span>
00153     <span class="keywordtype">int</span>             netsnmp_monitor_check_registered(<span class=
"keywordtype">int</span> event, oid * oid,
00154                                                      <span class="keywordtype">int</span> oid_len);
00155 
00156 
00157     <span class="comment">/**********************************************************************</span>
00158 <span class="comment">     * function prototypes</span>
00159 <span class="comment">     */</span>
00160 
00161     <span class="comment">/*</span>
00162 <span class="comment">     * Notifies the object monitor of an event.</span>
00163 <span class="comment">     */</span>
00164     <span class="keywordtype">void</span>            netsnmp_notify_monitor(netsnmp_monitor_callback_header
00165                                            * cbh);
00166 
00167 
00168 
00169 
00170     <span class="comment">/**********************************************************************</span>
00171 <span class="comment">     * function prototypes</span>
00172 <span class="comment">     */</span>
00173 
00174     <span class="comment">/*</span>
00175 <span class="comment">     * Notifies the object monitor of a cooperative event.</span>
00176 <span class="comment">     */</span>
00177     <span class="keywordtype">void</span>            netsnmp_notify_cooperative(<span class=
"keywordtype">int</span> event, oid * object,
00178                                                size_t len, <span class="keywordtype">char</span> oid_steal,
00179                                                <span class="keywordtype">void</span> *object_info);
00180 
00181 
00182 
00183 <span class="preprocessor">#ifdef __cplusplus</span>
00184 }
00185 <span class="preprocessor">#endif</span>
00186 <span class="preprocessor">#endif </span>
</pre>
  </div>
  <hr size="1" />

  <address style="align: right;">
    <small><!--#include virtual="/sfbutton.html" --><br />
    Generated on Thu Nov 25 17:51:38 2004 for net-snmp by&nbsp; <a href="http://www.doxygen.org/index.html"><img src=
    "doxygen.png" alt="doxygen" align="middle" border="0" /></a> 1.3.9.1</small>
  </address>
<!-- CONTENT END -->
<!--#include virtual="/page-bottom.html" -->

