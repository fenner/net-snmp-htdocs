<!--#set var="section" value="development" -->
<!--#include virtual="/page-top.html" -->
<!-- CONTENT START -->
  <!-- Generated by Doxygen 1.3.9.1 -->

  <div class="qindex">
    <a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class=
    "qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class=
    "qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class=
    "qindex" href="examples.html">Examples</a>
  </div>

  <div class="nav">
    <a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href=
    "dir_000001.html">net-snmp</a>&nbsp;/&nbsp;<a class="el" href="dir_000006.html">library</a>
  </div>

  <h1>oid_stash.h</h1>

  <div class="fragment">
    <pre class="fragment">
00001 <span class="preprocessor">#ifndef OID_STASH_H</span>
00002 <span class="preprocessor">#define OID_STASH_H</span>
00003 
00004 <span class="comment">/*</span>
00005 <span class="comment"> * designed to store/retrieve information associated with a given oid.</span>
00006 <span class="comment"> * Storage is done in an efficient tree manner for fast lookups.</span>
00007 <span class="comment"> */</span>
00008 
00009 <span class="preprocessor">#define OID_STASH_CHILDREN_SIZE 31</span>
00010 
00011 <span class="preprocessor">#ifdef __cplusplus</span>
00012 <span class="keyword">extern</span>          <span class="stringliteral">"C"</span> {
00013 <span class="preprocessor">#endif</span>
00014 
00015     <span class="keyword">struct </span>netsnmp_oid_stash_node_s;
00016 
00017     <span class="comment">/* args: buffer, sizeof(buffer), yourdata, stashnode */</span>
00018     <span class="keyword">typedef</span> int     (NetSNMPStashDump) (<span class="keywordtype">char</span> *, size_t,
00019                                         <span class="keywordtype">void</span> *,
00020                                         <span class="keyword">struct </span>netsnmp_oid_stash_node_s *);
00021 
00022     <span class="keyword">typedef</span> void    (NetSNMPStashFreeNode) (<span class="keywordtype">void</span> *);
00023     
00024     <span class="keyword">typedef</span> <span class="keyword">struct </span>netsnmp_oid_stash_node_s {
00025         oid             value;
00026         <span class="keyword">struct </span>netsnmp_oid_stash_node_s **children;     <span class=
"comment">/* array of children */</span>
00027         size_t          children_size;
00028         <span class="keyword">struct </span>netsnmp_oid_stash_node_s *next_sibling;  <span class=
"comment">/* cache too small links */</span>
00029         <span class="keyword">struct </span>netsnmp_oid_stash_node_s *prev_sibling;
00030         <span class="keyword">struct </span>netsnmp_oid_stash_node_s *parent; 
00031 
00032         <span class="keywordtype">void</span>           *thedata;
00033     } netsnmp_oid_stash_node;
00034 
00035     <span class="keyword">typedef</span> <span class="keyword">struct </span>netsnmp_oid_stash_save_info_s {
00036        <span class="keyword">const</span> <span class="keywordtype">char</span> *token;
00037        netsnmp_oid_stash_node **root;
00038        NetSNMPStashDump *dumpfn;
00039     } netsnmp_oid_stash_save_info;
00040 
00041     <span class="keywordtype">int</span>             <a class="code" href=
"group__oid__stash.html#ga2">netsnmp_oid_stash_add_data</a>(netsnmp_oid_stash_node
00042                                                **root, oid * lookup,
00043                                                size_t lookup_len,
00044                                                <span class="keywordtype">void</span> *mydata);
00045     SNMPCallback netsnmp_oid_stash_store_all;
00046 
00047 
00048     netsnmp_oid_stash_node
00049         *<a class="code" href="group__oid__stash.html#ga3">netsnmp_oid_stash_get_node</a>(netsnmp_oid_stash_node *root,
00050                                     oid * lookup, size_t lookup_len);
00051     <span class="keywordtype">void</span>           *<a class="code" href=
"group__oid__stash.html#ga5">netsnmp_oid_stash_get_data</a>(netsnmp_oid_stash_node
00052                                                *root, oid * lookup,
00053                                                size_t lookup_len);
00054     netsnmp_oid_stash_node *
00055     <a class="code" href="group__oid__stash.html#ga4">netsnmp_oid_stash_getnext_node</a>(netsnmp_oid_stash_node *root,
00056                                    oid * lookup, size_t lookup_len);
00057 
00058     netsnmp_oid_stash_node *<a class="code" href=
"group__oid__stash.html#ga0">netsnmp_oid_stash_create_sized_node</a>(size_t
00059                                                                 mysize);
00060     netsnmp_oid_stash_node *<a class="code" href=
"group__oid__stash.html#ga1">netsnmp_oid_stash_create_node</a>(<span class="keywordtype">void</span>);        <span class=
"comment">/* returns a malloced node */</span>
00061 
00062     <span class="keywordtype">void</span> <a class="code" href=
"group__oid__stash.html#ga7">netsnmp_oid_stash_store</a>(netsnmp_oid_stash_node *root,
00063                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *tokenname,
00064                                  NetSNMPStashDump *dumpfn,
00065                                  oid *curoid, size_t curoid_len);
00066 
00067     <span class="comment">/* frees all data in the stash and cleans it out.  Sets root = NULL */</span>
00068     <span class="keywordtype">void</span> <a class="code" href=
"group__oid__stash.html#ga9">netsnmp_oid_stash_free</a>(netsnmp_oid_stash_node **root,
00069                                 NetSNMPStashFreeNode *freefn);
00070                                 
00071 
00072     <span class="comment">/* a noop function that can be passed to netsnmp_oid_stash_node to</span>
00073 <span class="comment">       NOT free the data */</span>
00074     NetSNMPStashFreeNode netsnmp_oid_stash_no_free;
00075 <span class="preprocessor">#ifdef __cplusplus</span>
00076 }
00077 <span class="preprocessor">#endif</span>
00078 <span class="preprocessor">#endif                          </span><span class="comment">/* OID_STASH_H */</span>
</pre>
  </div>
  <hr size="1" />

  <address style="align: right;">
    <small>Generated on Fri Dec 30 13:47:46 2005 for net-snmp by&nbsp; <a href="http://www.doxygen.org/index.html"><img src=
    "doxygen.png" alt="doxygen" align="middle" border="0" /></a> 1.3.9.1</small>
  </address>
<!-- CONTENT END -->
<!--#include virtual="/page-bottom.html" -->

