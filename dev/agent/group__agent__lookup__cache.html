<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>net-snmp: Lookup cache, storing the registered OIDs.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">net-snmp&#160;<span id="projectnumber">5.7</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Lookup cache, storing the registered OIDs.</div>  </div>
<div class="ingroups"><a class="el" href="group__agent__registry.html">Registry of MIB subtrees, modules, sessions, etc</a></div></div>
<div class="contents">

<p>Maintain the cache used for locating sub-trees and OIDs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlookup__cache__context__s.html">lookup_cache_context_s</a></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8c886a8cbd01bdbe79fab3384d74752b"></a><!-- doxytag: member="agent_lookup_cache::lookup_cache_context" ref="ga8c886a8cbd01bdbe79fab3384d74752b" args="" -->
typedef struct <br class="typebreak"/>
<a class="el" href="structlookup__cache__context__s.html">lookup_cache_context_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>lookup_cache_context</b></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agent__lookup__cache.html#ga57d90f0d6bd67ee93c9d12e79072bf25">netsnmp_set_lookup_cache_size</a> (int newsize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the lookup cache size for optimized agent registration performance.  <a href="#ga57d90f0d6bd67ee93c9d12e79072bf25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agent__lookup__cache.html#ga6e8ace1840a14019f1427b58b97f8424">netsnmp_get_lookup_cache_size</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the current value of the lookup cache size Should be called from master agent only - sub-agent doesn't need the cache.  <a href="#ga6e8ace1840a14019f1427b58b97f8424"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NETSNMP_STATIC_INLINE <br class="typebreak"/>
<a class="el" href="structlookup__cache__context__s.html">lookup_cache_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agent__lookup__cache.html#ga00cd1c978fccf6b6d6639adbfce8ca39">get_context_lookup_cache</a> (const char *context)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns lookup cache entry for the context of given name.  <a href="#ga00cd1c978fccf6b6d6639adbfce8ca39"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NETSNMP_STATIC_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agent__lookup__cache.html#ga001afe9afd2d5ced6f3bc36e2420890f">lookup_cache_add</a> (const char *context, <a class="el" href="structnetsnmp__subtree__s.html">netsnmp_subtree</a> *next, <a class="el" href="structnetsnmp__subtree__s.html">netsnmp_subtree</a> *previous)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds an entry to the Lookup Cache under specified context name.  <a href="#ga001afe9afd2d5ced6f3bc36e2420890f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NETSNMP_STATIC_INLINE <br class="typebreak"/>
lookup_cache *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agent__lookup__cache.html#ga8338e217abdc940c2168668ce7cfc341">lookup_cache_find</a> (const char *context, const oid *name, size_t name_len, int *retcmp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds an entry in the Lookup Cache.  <a href="#ga8338e217abdc940c2168668ce7cfc341"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa11122cc45795e3d1abeea6e1d9bfab5"></a><!-- doxytag: member="agent_lookup_cache::clear_lookup_cache" ref="gaa11122cc45795e3d1abeea6e1d9bfab5" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>clear_lookup_cache</b> (void)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf095b47d986ee11e3110939b7d8b8b24"></a><!-- doxytag: member="agent_lookup_cache::lookup_cache" ref="gaf095b47d986ee11e3110939b7d8b8b24" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>lookup_cache</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Maintain the cache used for locating sub-trees and OIDs. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga00cd1c978fccf6b6d6639adbfce8ca39"></a><!-- doxytag: member="agent_registry.c::get_context_lookup_cache" ref="ga00cd1c978fccf6b6d6639adbfce8ca39" args="(const char *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NETSNMP_STATIC_INLINE <a class="el" href="structlookup__cache__context__s.html">lookup_cache_context</a>* get_context_lookup_cache </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns lookup cache entry for the context of given name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>Name of the context. Name is case sensitive.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the lookup cache context </dd></dl>

<p>Definition at line <a class="el" href="agent__registry_8c_source.html#l00142">142</a> of file <a class="el" href="agent__registry_8c_source.html">agent_registry.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga001afe9afd2d5ced6f3bc36e2420890f"></a><!-- doxytag: member="agent_registry.c::lookup_cache_add" ref="ga001afe9afd2d5ced6f3bc36e2420890f" args="(const char *context, netsnmp_subtree *next, netsnmp_subtree *previous)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NETSNMP_STATIC_INLINE void lookup_cache_add </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnetsnmp__subtree__s.html">netsnmp_subtree</a> *&#160;</td>
          <td class="paramname"><em>next</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnetsnmp__subtree__s.html">netsnmp_subtree</a> *&#160;</td>
          <td class="paramname"><em>previous</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds an entry to the Lookup Cache under specified context name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>Name of the context. Name is case sensitive.</td></tr>
    <tr><td class="paramname">next</td><td>Next subtree item.</td></tr>
    <tr><td class="paramname">previous</td><td>Previous subtree item. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="agent__registry_8c_source.html#l00173">173</a> of file <a class="el" href="agent__registry_8c_source.html">agent_registry.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga8338e217abdc940c2168668ce7cfc341"></a><!-- doxytag: member="agent_registry.c::lookup_cache_find" ref="ga8338e217abdc940c2168668ce7cfc341" args="(const char *context, const oid *name, size_t name_len, int *retcmp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NETSNMP_STATIC_INLINE lookup_cache* lookup_cache_find </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const oid *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>name_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>retcmp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds an entry in the Lookup Cache. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>Case sensitive name of the context.</td></tr>
    <tr><td class="paramname">name</td><td>The OID we're searching for.</td></tr>
    <tr><td class="paramname">name_len</td><td>Number of sub-ids (single integers) in the OID.</td></tr>
    <tr><td class="paramname">retcmp</td><td>Value set to <a class="el" href="group__library.html#gab5b48a42c19a801547e025ed40b4561e" title="lexicographical compare two object identifiers.">snmp_oid_compare()</a> call result. The value, if set, is always nonnegative.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>gives Lookup Cache entry, or NULL if not found.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__library.html#gab5b48a42c19a801547e025ed40b4561e" title="lexicographical compare two object identifiers.">snmp_oid_compare()</a> </dd></dl>

<p>Definition at line <a class="el" href="agent__registry_8c_source.html#l00223">223</a> of file <a class="el" href="agent__registry_8c_source.html">agent_registry.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga6e8ace1840a14019f1427b58b97f8424"></a><!-- doxytag: member="agent_registry.c::netsnmp_get_lookup_cache_size" ref="ga6e8ace1840a14019f1427b58b97f8424" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int netsnmp_get_lookup_cache_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieves the current value of the lookup cache size Should be called from master agent only - sub-agent doesn't need the cache. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the current lookup cache size </dd></dl>

<p>Definition at line <a class="el" href="agent__registry_8c_source.html#l00131">131</a> of file <a class="el" href="agent__registry_8c_source.html">agent_registry.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga57d90f0d6bd67ee93c9d12e79072bf25"></a><!-- doxytag: member="agent_registry.c::netsnmp_set_lookup_cache_size" ref="ga57d90f0d6bd67ee93c9d12e79072bf25" args="(int newsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void netsnmp_set_lookup_cache_size </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newsize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the lookup cache size for optimized agent registration performance. </p>
<p>Note that it is only used by master agent - sub-agent doesn't need the cache. The rough guide is that the cache size should be equal to the maximum number of simultaneous managers you expect to talk to the agent (M) times 80% (or so, he says randomly) the average number (N) of varbinds you expect to receive in a given request for a manager. ie, M times N. Bigger does NOT necessarily mean better. Certainly 16 should be an upper limit. 32 is the hard coded limit.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">newsize</td><td>set to the maximum size of a cache for a given context. Set to 0 to completely disable caching, or to -1 to set to the default cache size (8), or to a number of your chosing. The </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="agent__registry_8c_source.html#l00116">116</a> of file <a class="el" href="agent__registry_8c_source.html">agent_registry.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Jul 14 2011 for net-snmp by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
